[gd_scene load_steps=18 format=4 uid="uid://delaxhx1j17tb"]

[ext_resource type="TileSet" uid="uid://ibgnx2ymucbq" path="res://levels/tileset.tres" id="1_80vhd"]
[ext_resource type="Script" uid="uid://do2or4ovxyerg" path="res://levels/level.gd" id="1_gjl0y"]
[ext_resource type="PackedScene" uid="uid://dqaihh17n1f12" path="res://entities/camera/camera.tscn" id="2_hjsbj"]
[ext_resource type="PackedScene" uid="uid://c3fqkueu71rf2" path="res://entities/door/door.tscn" id="2_safpt"]
[ext_resource type="PackedScene" uid="uid://ber2ukf0x5uaw" path="res://entities/parallax/parallax.tscn" id="2_vnv7o"]
[ext_resource type="PackedScene" uid="uid://bk48wlfkg1p11" path="res://entities/button/button.tscn" id="3_gjl0y"]
[ext_resource type="PackedScene" uid="uid://biotlhx7rd3hp" path="res://entities/orb/orb.tscn" id="4_vnv7o"]
[ext_resource type="Shader" uid="uid://c4kghet2pushk" path="res://levels/cutout.gdshader" id="8_d5x7l"]
[ext_resource type="Texture2D" uid="uid://cndbn1jeog6o1" path="res://levels/loop.png" id="10_pb8y7"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_hjsbj"]
size = Vector2(96, 96)

[sub_resource type="Environment" id="Environment_vnv7o"]
background_mode = 3

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rtcij"]
shader = ExtResource("8_d5x7l")
shader_parameter/top_left = Vector2(20, 20)
shader_parameter/bottom_right = Vector2(460, 250)
shader_parameter/rounded = 14.0
shader_parameter/offset = Vector2(0, 0)

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_d5x7l"]

[sub_resource type="AtlasTexture" id="AtlasTexture_mxp4k"]
atlas = ExtResource("10_pb8y7")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_d7v53"]
atlas = ExtResource("10_pb8y7")
region = Rect2(32, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_0qmeg"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mxp4k")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_d7v53")
}],
"loop": true,
"name": &"pressed",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ta7ci"]
size = Vector2(32, 20)

[node name="Level" type="Node2D"]
script = ExtResource("1_gjl0y")

[node name="Parallax" type="CanvasLayer" parent="."]
layer = -10

[node name="Parallax" parent="Parallax" instance=ExtResource("2_vnv7o")]
material = null
metadata/_edit_lock_ = true

[node name="Background" type="TileMapLayer" parent="."]
z_index = -9
tile_set = ExtResource("1_80vhd")
collision_enabled = false
metadata/_edit_lock_ = true

[node name="Objects" type="Node2D" parent="."]
metadata/_edit_lock_ = true

[node name="ExitDoor" parent="Objects" instance=ExtResource("2_safpt")]
position = Vector2(471, 64)

[node name="Button" parent="Objects" node_paths=PackedStringArray("door") instance=ExtResource("3_gjl0y")]
position = Vector2(240, 248)
door = NodePath("../ExitDoor")

[node name="Orb" parent="Objects" instance=ExtResource("4_vnv7o")]
position = Vector2(240, 144)
freeze = true

[node name="Map" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAABABAAAgAWAAUAAAACABAAAgAWAAUAAAADABAAAgAWAAUAAAAEABAAAgAWAAUAAAAFABAAAgAWAAUAAAAGABAAAgAWAAUAAAAHABAAAgAWAAUAAAAIABAAAgAWAAUAAAAJABAAAgAWAAUAAAAKABAAAgAWAAUAAAALABAAAgAWAAUAAAAMABAAAgAWAAUAAAANABAAAgAWAAUAAAAOABAAAgAWAAUAAAAPABAAAgAWAAUAAAAQABAAAgAWAAUAAAARABAAAgAWAAUAAAASABAAAgAWAAUAAAATABAAAgAWAAUAAAAUABAAAgAWAAUAAAAVABAAAgAWAAUAAAAWABAAAgAWAAUAAAAXABAAAgAWAAUAAAAYABAAAgAWAAUAAAAZABAAAgAWAAUAAAAaABAAAgAWAAUAAAAbABAAAgAWAAUAAAAcABAAAgAWAAUAAAAAAAkAAgAXAAcAAAAAAAgAAgAXAAYAAAAAAAcAAgAXAAYAAAAAAAYAAgAXAAYAAAAAAAUAAgAXAAYAAAAAAAQAAgAXAAYAAAAAAAMAAgAXAAYAAAAAAAIAAgAXAAYAAAAAAAEAAgAXAAYAAAABAAAAAgAWAAcAAAACAAAAAgAWAAcAAAADAAAAAgAWAAcAAAAEAAAAAgAWAAcAAAAFAAAAAgAWAAcAAAAGAAAAAgAWAAcAAAAHAAAAAgAWAAcAAAAIAAAAAgAWAAcAAAAJAAAAAgAWAAcAAAAdAA8AAgAVAAYAAAAdAA4AAgAVAAYAAAAdAA0AAgAVAAYAAAAdAAwAAgAVAAYAAAAdAAsAAgAVAAYAAAAdAAoAAgAVAAYAAAAdAAkAAgAVAAYAAAAdAAgAAgAVAAYAAAAdAAcAAgAVAAUAAAAdAAAAAgAWAAcAAAAKAAAAAgAbAAUAAAALAAAAAgAbAAUAAAAMAAAAAgAbAAUAAAANAAAAAgAbAAUAAAAOAAAAAgAbAAUAAAAPAAAAAgAbAAUAAAAQAAAAAgAbAAUAAAARAAAAAgAbAAUAAAASAAAAAgAbAAUAAAATAAAAAgAbAAUAAAAUAAAAAgAbAAUAAAAVAAAAAgAbAAUAAAAWAAAAAgAbAAUAAAAXAAAAAgAbAAUAAAAYAAAAAgAbAAUAAAAZAAAAAgAbAAUAAAAaAAAAAgAbAAUAAAAbAAAAAgAbAAUAAAAcAAAAAgAbAAUAAAAdABAAAgAcAAcAAAAAAAAAAgAaAAUAAAAAABAAAgAbAAcAAAABAAIAAgAQAAEAAAABAAMAAgAQAAEAAAABAAQAAgAQAAEAAAABAAUAAgAQAAEAAAABAAYAAgAQAAEAAAABAAcAAgAQAAEAAAABAAgAAgAQAAEAAAA=")
tile_set = ExtResource("1_80vhd")
metadata/_edit_lock_ = true

[node name="EntranceDoor" parent="." instance=ExtResource("2_safpt")]
position = Vector2(9, 208)

[node name="Timer" type="Timer" parent="EntranceDoor"]
wait_time = 3.0
one_shot = true

[node name="PlayerSpawn" type="Marker2D" parent="."]
position = Vector2(-52, 210)

[node name="Timer" type="Timer" parent="PlayerSpawn"]
one_shot = true

[node name="Camera" parent="PlayerSpawn" instance=ExtResource("2_hjsbj")]
metadata/_edit_lock_ = true

[node name="Velocity" type="Marker2D" parent="PlayerSpawn"]
position = Vector2(142, 0)

[node name="FinishArea" type="Area2D" parent="."]
position = Vector2(528, 64)

[node name="CollisionShape" type="CollisionShape2D" parent="FinishArea"]
shape = SubResource("RectangleShape2D_hjsbj")
debug_color = Color(0.680476, 1, 0.652914, 0.419608)
metadata/_edit_lock_ = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="CanvasLayer"]
environment = SubResource("Environment_vnv7o")

[node name="Cutout" type="Polygon2D" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_rtcij")
color = Color(0, 0, 0, 1)
texture = SubResource("PlaceholderTexture2D_d5x7l")
polygon = PackedVector2Array(0, 0, 480, 0, 480, 270, 0, 270)
metadata/_edit_lock_ = true

[node name="LoopButton" type="Area2D" parent="CanvasLayer"]
position = Vector2(29, 23)

[node name="Sprite" type="AnimatedSprite2D" parent="CanvasLayer/LoopButton"]
sprite_frames = SubResource("SpriteFrames_0qmeg")
metadata/_edit_lock_ = true

[node name="CollisionShape" type="CollisionShape2D" parent="CanvasLayer/LoopButton"]
shape = SubResource("RectangleShape2D_ta7ci")
metadata/_edit_lock_ = true

[connection signal="timeout" from="EntranceDoor/Timer" to="." method="_on_entrance_timeout"]
[connection signal="timeout" from="PlayerSpawn/Timer" to="." method="_on_spawn_timer_timeout"]
[connection signal="body_entered" from="FinishArea" to="." method="_on_finish_area_entered"]
[connection signal="input_event" from="CanvasLayer/LoopButton" to="." method="_on_loop_button_input_event"]
